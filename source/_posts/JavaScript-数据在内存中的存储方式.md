---
title: JavaScript-数据在内存中的存储方式
tags: JavaScript
categories: JavaScript
cover: false
img: /image/10.jpg
summary: js中数据在内存中的存储方式
abbrlink: 242b
date: 2020-08-23 21:32:53
---

# JavaScript中数据在内存中的存储方式



### 1、js数据类型分类

- 简单数据类型：Number、String、Boolean、Undefined、Null
- 复杂数据类型：Object、Array、Function

简单数据类型也称基本数据类型，复杂数据类型也称引用数据类型。

### 2、数据结构

数据结构是计算机存储、组织数据的方式。这里只列出分类不做详细解释，常用的数据结构有：数组、栈、堆、列表、链表、树、图、散列表。

本文中只用到这两种数据结构：栈(后进先出，使用堆的一种方法)、堆(特殊的树形结构)

### 3、简单数据类型存储方式

简单数据类型保存在栈中，这些类型在内存中别占有固定大小，他们的值保存在栈空间，按值访问。变量在声明过程中，会在栈中开辟一段内存空间，变量值直接存在该内存中，变量读写的是它们实际保存的值。

```js
var num = 1;
var str = 'abc';
```

{% asset_img 1.png %}

简单数据数据复制时，会为新声明的变量开辟一段新空间， 然后把值复制到为新变量分配的空间中。 

```js
var num = 1;
var str = 'abc';
var num2 = num;
var str2 = str;
```

{% asset_img 2.png %}

简单数据类在当前执行环境结束时销毁。

### 4、复杂数据类型存储方式

复杂数据类型是不固定大小的数据，但是存放他们的地址大小是固定的，所以把地址保存在栈中，值保存在堆中。复杂数据类型是一个指针，指针保存在栈中，但是指针指向的是堆。即存储复杂数据类型的变量保存在栈中，数据本身保存在堆中。读取其数据时，先访问栈中的地址，通过地址找到存在堆中的数据。

```js
var object1 = new Object();
var arr1 = new Array();
```

{% asset_img 3.png %}

复杂数据类型进行浅拷贝时，复制的是引用地址。

```js
var object1 = {
	name:'张三',
    age:18
}
var arr1 = [1,2,3,4]
var object2 = object1;
var arr2 = arr1;
```

{% asset_img 4.png %}

由于浅拷贝指向的是同一个地址，所以当object2和arr2的值改变时，object1和arr1的值也随之改变。

与浅拷贝对应的是深拷贝，深拷贝是将引用类型的值全部拷贝一份，并且存放在不同的内存中，形成一个新的引用类型，修改它的值不会影响原来的值。

复杂数据类型不会随着当前执行环境结束而销毁，只有存放变量的地址不存在时，内存才会被垃圾回收机制回收。

但是这里有一个特殊的地方，就是null，null类型虽然是简单数据类型，但实际是一个特殊的对象，存放null的变量在栈中，指针指向堆中的一段空内存。
